const questions = [

/* ================= PART 1 : MCQ ================= */

{
  type: "mcq",
  q: 'Which function is described as the "heart" of the management process?',
  options: ["Planning", "Organizing", "Directing", "Controlling"],
  a: 2
},
{
  type: "mcq",
  q: "Directing is a ________ process that takes place at all levels of management.",
  options: ["One-time", "Continuous", "Temporary", "Preliminary"],
  a: 1
},
{
  type: "mcq",
  q: "In the organizational hierarchy, directing flows from:",
  options: ["Bottom to top", "Top to bottom", "Peers to peers only", "External stakeholders to managers"],
  a: 1
},
{
  type: "mcq",
  q: "Which of these is NOT an element of directing?",
  options: ["Supervision", "Motivation", "Budgeting", "Leadership"],
  a: 2
},
{
  type: "mcq",
  q: "The technical means used by a manager to get work done is:",
  options: ["The Plan", "The Order", "The Budget", "The Report"],
  a: 1
},
{
  type: "mcq",
  q: "Which technique of direction involves decision-making after discussion with subordinates?",
  options: ["Automatic direction", "Free-rein direction", "Consultative direction", "Oral direction"],
  a: 2
},
{
  type: "mcq",
  q: "What is a major disadvantage of Consultative Direction?",
  options: ["Low morale", "It is time-consuming", "High resistance from staff", "Lack of communication"],
  a: 1
},
{
  type: "mcq",
  q: "Free-rein direction is also known as:",
  options: ["Autocratic", "Laissez-faire", "Consultative", "Technical"],
  a: 1
},
{
  type: "mcq",
  q: "Which principle states that individual goals should align with organizational goals?",
  options: [
    "Principle of Comprehension",
    "Principle of Harmony of Objectives",
    "Principle of Follow-through",
    "Principle of Managerial Communication"
  ],
  a: 1
},
{
  type: "mcq",
  q: "The art of overseeing and guiding the work of others with authority is called:",
  options: ["Motivation", "Supervision", "Planning", "Staffing"],
  a: 1
},
{
  type: "mcq",
  q: "The complex force starting and keeping a person at work is:",
  options: ["Communication", "Motivation", "Leadership", "Directing"],
  a: 1
},
{
  type: "mcq",
  q: "Which leadership style involves making decisions without staff input?",
  options: ["Democratic", "Laissez-faire", "Autocratic", "Consultative"],
  a: 2
},
{
  type: "mcq",
  q: "Communication is the transfer of information and ________.",
  options: ["Money", "Understanding", "Power", "Authority"],
  a: 1
},
{
  type: "mcq",
  q: "Directing helps in bringing and coping with ________ in the organization.",
  options: ["Stability", "Changes", "Stagnation", "Conflicts"],
  a: 1
},
{
  type: "mcq",
  q: "Which type of directions are more intelligible and avoid duplication of effort?",
  options: ["Oral directions", "Written directions", "Implicit directions", "Visual directions"],
  a: 1
},
{
  type: "mcq",
  q: "The principle of Follow-through means:",
  options: [
    "Giving the order once",
    "Checking if directions are being carried out",
    "Following the manager everywhere",
    "Hiring new staff"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Which function converts plans into performance?",
  options: ["Staffing", "Organizing", "Directing", "Controlling"],
  a: 2
},
{
  type: "mcq",
  q: "A manager should give the ________ for an order to ensure better understanding.",
  options: ["Price", "Reason", "Punishment", "Deadline only"],
  a: 1
},
{
  type: "mcq",
  q: "Motivation helps in reducing employee ________ and absenteeism.",
  options: ["Performance", "Salaries", "Turnover", "Skills"],
  a: 2
},
{
  type: "mcq",
  q: "Pervasive function means directing is required at:",
  options: ["Top level only", "Bottom level only", "All levels of management", "Large hospitals only"],
  a: 2
},

/* ================= PART 2 : TRUE / FALSE ================= */

{ type: "tf", q: "Directing is initiated at the top level and flows downward.", a: true },
{ type: "tf", q: "Planning and organizing are effective even without directing.", a: false },
{ type: "tf", q: "Directing is a delegate function because human behavior is unpredictable.", a: true },
{ type: "tf", q: "In automatic direction, instructions are vague.", a: false },
{ type: "tf", q: "Supervision involves training and discipline.", a: true },
{ type: "tf", q: "Motivation is the core of management because it is work behavior itself.", a: true },
{ type: "tf", q: "A good leader should increase wastage to save time.", a: false },
{ type: "tf", q: "Communication enables delegation and decentralization.", a: true },
{ type: "tf", q: "Directing deals only with material resources.", a: false },
{ type: "tf", q: "Written directions are best for permanent information.", a: true },
{ type: "tf", q: "Leadership is the ability to inspire and influence people.", a: true },
{ type: "tf", q: "Horizontal communication occurs between supervisor and subordinate.", a: false },
{ type: "tf", q: "Tone of an order does not affect acceptance.", a: false },
{ type: "tf", q: "Directing creates balance through rewards and incentives.", a: true },
{ type: "tf", q: "Free-rein direction usually shows the slowest results.", a: false },
{ type: "tf", q: "Oral directions are best for long-term complex work.", a: false },
{ type: "tf", q: "Principle of comprehension ensures message understanding.", a: true },
{ type: "tf", q: "Directing is a creative activity.", a: true },
{ type: "tf", q: "Supervisors are at the top level of directing hierarchy.", a: false },
{ type: "tf", q: "Motivation helps attract competent employees.", a: true },

/* ================= PART 3 : CRITICAL THINKING ================= */

{
  type: "mcq",
  q: "Using consultative direction without valuing staff input leads to:",
  options: [
    "Faster decisions",
    "Employee frustration and loss of trust",
    "Excessive written orders",
    "Improved efficiency"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Why is directing called the heart of management?",
  options: [
    "It is the first step",
    "It converts plans into action",
    "It involves only top management",
    "It focuses on finance"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Ignoring written memos suggests revisiting which principle?",
  options: [
    "Harmony of objectives",
    "Follow-through",
    "Technical means",
    "Organizing"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Best leadership style in a life-threatening ICU emergency:",
  options: ["Laissez-faire", "Democratic", "Autocratic", "Consultative"],
  a: 2
},
{
  type: "mcq",
  q: "If directing is pervasive, which is correct?",
  options: [
    "Only hospital managers direct",
    "Every manager with subordinates must direct",
    "Only new staff need directing",
    "Directing stops after goals"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Motivation acts as a balancing tool by:",
  options: [
    "Equal salaries",
    "Aligning personal interests with organizational stability",
    "Flexible attendance",
    "Reducing managers"
  ],
  a: 1
},
{
  type: "mcq",
  q: "A harsh tone with a correct order will likely cause:",
  options: [
    "Perfect compliance",
    "Rejection or resentment",
    "Horizontal communication",
    "Message comprehension"
  ],
  a: 1
},
{
  type: "mcq",
  q: "If a group manager fails to communicate, the supervisor:",
  options: [
    "Reports to top executive",
    "Lacks clear instructions",
    "Becomes top executive",
    "Works independently"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Human behavior is unpredictable because:",
  options: [
    "Humans are not machines",
    "Managers lack skills",
    "Rules do not exist",
    "Plans are wrong"
  ],
  a: 0
},
{
  type: "mcq",
  q: "Free-rein direction with skilled researchers leads to:",
  options: [
    "Chaos",
    "High initiative and quick results",
    "Constant discipline",
    "Autocratic shift"
  ],
  a: 1
}

];

console.log(questions.length); 
let index = 0;
let answers = Array(questions.length).fill(null);
let reviewMode = false;
let shuffledQuestions = [];
/* ========= ELEMENTS ========= */

const qText = document.getElementById("questionText");
const optionsDiv = document.getElementById("options");
const counter = document.getElementById("counter");
const progress = document.getElementById("progressBar");
const nextBtn = document.getElementById("nextBtn");
const resultBox = document.getElementById("result");
const resultScore = document.getElementById("resultScore");
const resultPercent = document.getElementById("resultPercent");
/* ========= OPTIONS ========= */
function shuffleOptions(arr) {
  const array = [...arr];
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
function createOption(text, isCorrect) {
  const b = document.createElement("button");
  b.innerText = text;
  b.onclick = () => select(isCorrect, b);
  optionsDiv.appendChild(b);
}
function select(isCorrect, btn) {
  if (answers[index] !== null) return;

  answers[index] = isCorrect;

  const q = shuffledQuestions[index];

  [...optionsDiv.children].forEach(b => {
    b.disabled = true;

    // لو MCQ
    if (q.type === "mcq") {
      const correctText = q.options[q.a];

      if (b.innerText === correctText) {
        b.style.background = "#27ae60"; // الصح أخضر
      } else if (b === btn) {
        b.style.background = "#e74c3c"; // الغلط أحمر
      }
    }

    // لو True / False
    if (q.type === "tf") {
      if (
        (b.innerText === "True" && q.a === true) ||
        (b.innerText === "False" && q.a === false)
      ) {
        b.style.background = "#27ae60";
      } else if (b === btn) {
        b.style.background = "#e74c3c";
      }
    }
  });

  nextBtn.style.display = "inline-block";
}
function startQuiz() {
  index = 0;
  answers = Array(questions.length).fill(null);
  reviewMode = false;

  // ✅ اعمل نسخة بدل ما تغيّر الأصل
  shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);
document.getElementById("questionsBtn").innerText =
  `Questions (${shuffledQuestions.length})`;
  document.getElementById("result").classList.remove("show");
  document.getElementById("home").style.display = "none";
  document.getElementById("quiz").style.display = "block";

  loadQuestion();
}
function loadQuestion() {
  optionsDiv.innerHTML = "";
  nextBtn.style.display = "none";

  const q = shuffledQuestions[index];
  qText.innerText = q.q;
  counter.innerText = `Question ${index + 1} / ${shuffledQuestions.length}`;
  progress.style.width = ((index + 1) / shuffledQuestions.length) * 100 + "%";

  if (q.type === "tf") {
    createOption("True", q.a === true);
createOption("False", q.a === false);
  } else {
    const options = q.options.map((text, i) => ({
  text,
  correct: i === q.a
}));

shuffleOptions(options).forEach(opt => {
  createOption(opt.text, opt.correct);
});
  }
}

function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishQuiz();
  }
}

function finishQuiz() {
  const score = answers.filter(a => a === true).length;
  const percent = Math.round((score / questions.length) * 100);

  // اخفي الكويز
  document.getElementById("quiz").style.display = "none";

  // النصوص
  resultScore.innerText = `Score: ${score} / ${questions.length}`;
  resultPercent.innerText = `Percentage: ${percent}%`;

  let title = "";
  if (percent >= 85) {
    title = "اول دفعععهه يعمممم";
  } else if (percent >= 70) {
    title = "شد شويه يعممم";
  } else {
    title = "انت اخرك تخش كليه البهاييييمممم";
  }

  document.getElementById("resultTitle").innerText = title;

  // أظهر النتيجة بالأنيميشن
  resultBox.classList.add("show");
}
function restartQuiz() {
  document.getElementById("result").classList.remove("show");
  startQuiz();
}
function toggleQuestions() {
  const list = document.getElementById("questionsList");
  list.classList.toggle("show");
  renderQuestionsList();
}

function renderQuestionsList() {
  const list = document.getElementById("questionsList");
  list.innerHTML = "";

  shuffledQuestions.forEach((q, i) => {
    const b = document.createElement("button");
    b.innerText = i + 1;

    if (answers[i] === null) {
      b.className = "q-unanswered";
    } else if (answers[i] === true) {
      b.className = "q-correct";
    } else {
      b.className = "q-wrong";
    }

    if (i === index) {
      b.style.outline = "3px solid #3498db";
    }

    b.onclick = () => {
      index = i;
      loadQuestion();
      renderQuestionsList();
    };

    list.appendChild(b);
  });
}
/* ========= MENU ========= */

const sideMenu = document.getElementById("sideMenu");
const overlay = document.getElementById("overlay");

function toggleMenu() {
  sideMenu.classList.toggle("show");
  overlay.classList.toggle("show");
}

function closeMenu() {
  sideMenu.classList.remove("show");
  overlay.classList.remove("show");
}

/* ========= DARK MODE ========= */

function toggleDark() {
  document.body.classList.toggle("dark");
}
