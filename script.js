const questions = [

/* ================= PART 1 : MCQ (1–20) ================= */

{
  type: "mcq",
  q: "Directing is often referred to as the ________ of the management process.",
  options: ["Brain", "Heart", "Hand", "Skeleton"],
  a: 1
},
{
  type: "mcq",
  q: "The function of directing is performed by:",
  options: [
    "Only Top-level managers",
    "Only Supervisors",
    "Managers at all levels",
    "Only the HR department"
  ],
  a: 2
},
{
  type: "mcq",
  q: "Directing involves instructing, guiding, inspiring, and ________ people.",
  options: ["Recruiting", "Communicating with", "Hiring", "Planning for"],
  a: 1
},
{
  type: "mcq",
  q: "Which characteristic of directing means it is required at all levels?",
  options: [
    "Continuous activity",
    "Pervasive function",
    "Executive function",
    "Human factor"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Directing flows in which direction through the organization?",
  options: [
    "Upward",
    "Horizontal",
    "Downward",
    "Diagonal"
  ],
  a: 2
},
{
  type: "mcq",
  q: "Which type of direction is most suitable for simple routine tasks?",
  options: [
    "Written direction",
    "Oral direction",
    "Visual direction",
    "Formal direction"
  ],
  a: 1
},
{
  type: "mcq",
  q: "A major advantage of written direction is:",
  options: [
    "It saves time",
    "It is less expensive",
    "It can be studied and kept as a record",
    "It allows immediate feedback"
  ],
  a: 2
},
{
  type: "mcq",
  q: "Which technique is used when a manager issues orders without consultation?",
  options: [
    "Consultative",
    "Free-rein",
    "Autocratic",
    "Democratic"
  ],
  a: 2
},
{
  type: "mcq",
  q: "In consultative direction, the manager:",
  options: [
    "Decides alone",
    "Gives full freedom",
    "Consults subordinates before decision",
    "Uses written memos only"
  ],
  a: 2
},
{
  type: "mcq",
  q: "The style where the manager gives full independence is:",
  options: [
    "Autocratic",
    "Consultative",
    "Free-rein (Laissez-faire)",
    "Direct"
  ],
  a: 2
},
{
  type: "mcq",
  q: "The process of transmitting information is:",
  options: ["Motivation", "Leadership", "Communication", "Supervision"],
  a: 2
},
{
  type: "mcq",
  q: "Translating a message into symbols is called:",
  options: ["Decoding", "Feedback", "Encoding", "Transmission"],
  a: 2
},
{
  type: "mcq",
  q: "The person who interprets the message is the:",
  options: ["Sender", "Receiver", "Encoder", "Channel"],
  a: 1
},
{
  type: "mcq",
  q: "Which element ensures the message was understood correctly?",
  options: ["Noise", "Channel", "Feedback", "Context"],
  a: 2
},
{
  type: "mcq",
  q: "Communication between Head Nurse and Staff Nurse is:",
  options: [
    "Upward",
    "Downward",
    "Horizontal",
    "Diagonal"
  ],
  a: 1
},
{
  type: "mcq",
  q: "When a Staff Nurse sends a report to the Nursing Director, it is:",
  options: [
    "Upward communication",
    "Downward communication",
    "Horizontal communication",
    "External communication"
  ],
  a: 0
},
{
  type: "mcq",
  q: "Communication between Nursing and Pharmacy departments is:",
  options: ["Vertical", "Downward", "Horizontal", "Diagonal"],
  a: 2
},
{
  type: "mcq",
  q: "Which is NOT an element of directing?",
  options: ["Leadership", "Motivation", "Supervision", "Budgeting"],
  a: 3
},
{
  type: "mcq",
  q: "Motivation refers to:",
  options: [
    "Giving orders",
    "Stimulating people to achieve goals",
    "Correcting mistakes",
    "Hiring staff"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Directing is a ________ process.",
  options: ["One-time", "Temporary", "Continuous", "Intermittent"],
  a: 2
},

/* ================= PART 2 : TRUE / FALSE (21–40) ================= */

{ type: "tf", q: "Directing is a sub-function of planning.", a: false },
{ type: "tf", q: "Without directing, planning and organizing have no importance.", a: true },
{ type: "tf", q: "Oral direction is preferred for permanent complex information.", a: false },
{ type: "tf", q: "Feedback is the final step in communication.", a: true },
{ type: "tf", q: "Free-rein direction suits highly motivated professionals.", a: true },
{ type: "tf", q: "Downward communication flows from subordinates to superiors.", a: false },
{ type: "tf", q: "Noise interferes with communication.", a: true },
{ type: "tf", q: "Directing is an executive function.", a: true },
{ type: "tf", q: "Consultative direction improves morale.", a: true },
{ type: "tf", q: "Written direction helps accountability.", a: true },
{ type: "tf", q: "Horizontal communication occurs at different levels.", a: false },
{ type: "tf", q: "Supervision ensures work is done properly.", a: true },
{ type: "tf", q: "Effective directing ignores the human factor.", a: false },
{ type: "tf", q: "Sender initiates communication.", a: true },
{ type: "tf", q: "Diagonal communication crosses departments and levels.", a: true },
{ type: "tf", q: "Decoding means putting thoughts into words.", a: false },
{ type: "tf", q: "Direction should be clear and concise.", a: true },
{ type: "tf", q: "Motivation influences people to work toward goals.", a: true },
{ type: "tf", q: "Autocratic direction encourages participation.", a: false },
{ type: "tf", q: "Communication is only verbal.", a: false },

/* ================= PART 3 : CRITICAL THINKING (41–50) ================= */

{
  type: "mcq",
  q: "Best way to control rumors (grapevine) is:",
  options: [
    "Stop communication",
    "Provide transparent downward communication",
    "Punish staff",
    "Increase upward communication only"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Using written direction for every routine task will:",
  options: [
    "Increase accuracy",
    "Cause delays and red tape",
    "Lose accountability",
    "Lose records"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Best directing style during emergencies is:",
  options: [
    "Consultative",
    "Free-rein",
    "Autocratic",
    "Democratic"
  ],
  a: 2
},
{ type: "tf", q: "Communication is complete only when the receiver acts as intended.", a: true },
{
  type: "mcq",
  q: "Why is feedback critical in nursing communication?",
  options: [
    "Ends the process",
    "Ensures correct understanding and safety",
    "Makes sender happy",
    "Legal requirement"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Providing inspiration during crisis is:",
  options: [
    "Supervision",
    "Motivation/Leadership",
    "Discipline",
    "Planning"
  ],
  a: 1
},
{ type: "tf", q: "Directing links planning with performance.", a: true },
{
  type: "mcq",
  q: "Nursing Director communicating with Maintenance Manager is:",
  options: [
    "Vertical",
    "Diagonal/Horizontal",
    "Upward",
    "Internal directing"
  ],
  a: 1
},
{
  type: "mcq",
  q: "Failure in communication can occur at:",
  options: [
    "Receiver only",
    "Sender only",
    "Any stage of the process",
    "Feedback only"
  ],
  a: 2
},
{ type: "tf", q: "Pervasive direction means all supervisors direct subordinates.", a: true }

];

console.log(questions.length); // ✅ 50
console.log(questions.length);
let index = 0;
let answers = Array(questions.length).fill(null);
let reviewMode = false;
let shuffledQuestions = [];
/* ========= ELEMENTS ========= */

const qText = document.getElementById("questionText");
const optionsDiv = document.getElementById("options");
const counter = document.getElementById("counter");
const progress = document.getElementById("progressBar");
const nextBtn = document.getElementById("nextBtn");
const resultBox = document.getElementById("result");
const resultScore = document.getElementById("resultScore");
const resultPercent = document.getElementById("resultPercent");
/* ========= OPTIONS ========= */
function shuffleOptions(arr) {
  const array = [...arr];
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
function createOption(text, isCorrect) {
  const b = document.createElement("button");
  b.innerText = text;
  b.onclick = () => select(isCorrect, b);
  optionsDiv.appendChild(b);
}
function select(isCorrect, btn) {
  if (answers[index] !== null) return;

  answers[index] = isCorrect;

  const q = shuffledQuestions[index];

  [...optionsDiv.children].forEach(b => {
    b.disabled = true;

    // لو MCQ
    if (q.type === "mcq") {
      const correctText = q.options[q.a];

      if (b.innerText === correctText) {
        b.style.background = "#27ae60"; // الصح أخضر
      } else if (b === btn) {
        b.style.background = "#e74c3c"; // الغلط أحمر
      }
    }

    // لو True / False
    if (q.type === "tf") {
      if (
        (b.innerText === "True" && q.a === true) ||
        (b.innerText === "False" && q.a === false)
      ) {
        b.style.background = "#27ae60";
      } else if (b === btn) {
        b.style.background = "#e74c3c";
      }
    }
  });

  nextBtn.style.display = "inline-block";
}
function startQuiz() {
  index = 0;
  answers = Array(questions.length).fill(null);
  reviewMode = false;

  // ✅ اعمل نسخة بدل ما تغيّر الأصل
  shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);
document.getElementById("questionsBtn").innerText =
  `Questions (${shuffledQuestions.length})`;
  document.getElementById("result").classList.remove("show");
  document.getElementById("home").style.display = "none";
  document.getElementById("quiz").style.display = "block";

  loadQuestion();
}
function loadQuestion() {
  optionsDiv.innerHTML = "";
  nextBtn.style.display = "none";

  const q = shuffledQuestions[index];
  qText.innerText = q.q;
  counter.innerText = `Question ${index + 1} / ${shuffledQuestions.length}`;
  progress.style.width = ((index + 1) / shuffledQuestions.length) * 100 + "%";

  if (q.type === "tf") {
    createOption("True", q.a === true);
createOption("False", q.a === false);
  } else {
    const options = q.options.map((text, i) => ({
  text,
  correct: i === q.a
}));

shuffleOptions(options).forEach(opt => {
  createOption(opt.text, opt.correct);
});
  }
}

function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishQuiz();
  }
}

function finishQuiz() {
  const score = answers.filter(a => a === true).length;
  const percent = Math.round((score / questions.length) * 100);

  // اخفي الكويز
  document.getElementById("quiz").style.display = "none";

  // النصوص
  resultScore.innerText = `Score: ${score} / ${questions.length}`;
  resultPercent.innerText = `Percentage: ${percent}%`;

  let title = "";
  if (percent >= 85) {
    title = "اول دفعععهه يعمممم";
  } else if (percent >= 70) {
    title = "شد شويه يعممم";
  } else {
    title = "انت اخرك تخش كليه البهاييييمممم";
  }

  document.getElementById("resultTitle").innerText = title;

  // أظهر النتيجة بالأنيميشن
  resultBox.classList.add("show");
}
function restartQuiz() {
  document.getElementById("result").classList.remove("show");
  startQuiz();
}
function toggleQuestions() {
  const list = document.getElementById("questionsList");
  list.classList.toggle("show");
  renderQuestionsList();
}

function renderQuestionsList() {
  const list = document.getElementById("questionsList");
  list.innerHTML = "";

  shuffledQuestions.forEach((q, i) => {
    const b = document.createElement("button");
    b.innerText = i + 1;

    if (answers[i] === null) {
      b.className = "q-unanswered";
    } else if (answers[i] === true) {
      b.className = "q-correct";
    } else {
      b.className = "q-wrong";
    }

    if (i === index) {
      b.style.outline = "3px solid #3498db";
    }

    b.onclick = () => {
      index = i;
      loadQuestion();
      renderQuestionsList();
    };

    list.appendChild(b);
  });
}
/* ========= MENU ========= */

const sideMenu = document.getElementById("sideMenu");
const overlay = document.getElementById("overlay");

function toggleMenu() {
  sideMenu.classList.toggle("show");
  overlay.classList.toggle("show");
}

function closeMenu() {
  sideMenu.classList.remove("show");
  overlay.classList.remove("show");
}

/* ========= DARK MODE ========= */

function toggleDark() {
  document.body.classList.toggle("dark");
}